# アーキテクチャ決定記録

このディレクトリには、Hexabase.AIのアーキテクチャ決定記録（ADR）が含まれています。ADRは、プラットフォームの開発と進化の過程で行われた重要なアーキテクチャ決定を文書化しています。

## ADRとは？

アーキテクチャ決定記録は、重要なアーキテクチャ決定をそのコンテキストと結果と共に記録するものです。各ADRは以下を記述します：

- **コンテキスト**: 状況と作用する要因
- **決定**: 提案または合意された変更
- **結果**: 決定を適用した後に起こること

## ADRステータス

ADRは以下のステータスを持つことができます：
- **提案中**: 議論中
- **承認済み**: 承認され実装中
- **廃止**: もはや適用されない
- **置換済み**: 別のADRで置き換えられた

## 現在のADR

### 基盤決定

| ADR | タイトル | ステータス | 日付 |
|-----|---------|----------|------|
| [ADR-001](adr-001-multi-tenant-platform.md) | マルチテナントプラットフォーム | 承認済み | 2024-01-15 |
| [ADR-002](adr-002-oauth2-oidc-security.md) | OAuth2/OIDCセキュリティ | 承認済み | 2024-01-20 |
| [ADR-003](adr-003-faas-architecture.md) | FaaSアーキテクチャ | 承認済み | 2024-01-22 |

### APIと統合

| ADR | タイトル | ステータス | 日付 |
|-----|---------|----------|------|
| [ADR-004](adr-004-ai-operations.md) | AIオペレーション | 承認済み | 2024-02-01 |
| [ADR-005](adr-005-cicd-architecture.md) | CI/CDアーキテクチャ | 承認済み | 2024-02-10 |
| [ADR-006](adr-006-logging-monitoring.md) | ログ・監視 | 承認済み | 2024-02-15 |

### セキュリティとコンプライアンス

| ADR | タイトル | ステータス | 日付 |
|-----|---------|----------|------|
| [ADR-007](adr-007-backup-disaster-recovery.md) | バックアップ・DR | 承認済み | 2024-03-01 |
| [ADR-008](adr-008-domain-driven-design.md) | ドメイン駆動設計 | 承認済み | 2024-03-05 |


## ADRの使い方

### 開発者向け
1. **アーキテクチャ変更前**: 既存のADRを確認して現在の決定を理解する
2. **変更提案時**: テンプレートに従って新しいADRを作成する
3. **実装中**: コードコメントとドキュメントで関連するADRを参照する

### アーキテクト向け
1. **提案ADRのレビュー**: 新しいアーキテクチャ決定を評価する
2. **ステータス更新**: ADRを承認済み、廃止、または置換済みとしてマークする
3. **一貫性確保**: 新しい決定が既存のアーキテクチャと整合することを確認する

### 新チームメンバー向け
1. **ここから開始**: ADRを読んで主要なアーキテクチャ決定を理解する
2. **質問する**: 設計選択についての会話のきっかけとしてADRを使用する
3. **パターンを学習**: アーキテクチャの背後にある論理を理解する

## 新しいADRの作成

新しいアーキテクチャ決定を提案するには：

1. **テンプレートをコピー**: 下記のテンプレートを出発点として使用
2. **順次番号付け**: 次に利用可能なADR番号を使用
3. **命名規則に従う**: `adr-XXX-簡潔な説明.md`
4. **レビュー提出**: 提案ADRでプルリクエストを作成

### ADRテンプレート構造

```markdown
# ADR-XXX: タイトル

## ステータス
提案中 / 承認済み / 廃止 / ADR-YYYで置換済み

## コンテキスト
この決定の動機となっている問題は何か？

## 決定
提案している変更は何か？

## 結果
この変更後、何が簡単になり、何が困難になるか？
```

## ADR原則

1. **重要な決定を文書化**: すべての決定にADRが必要ではない
2. **簡潔に保つ**: ADRは短いが完全であるべき
3. **「なぜ」に焦点**: 結果だけでなく、推論を説明する
4. **不変記録**: 承認されたADRは編集せず、新しいものを作成する
5. **関連ADRをリンク**: 他の関連する決定を参照する

## レビュープロセス

1. **作成者が作成**: 開発者がテンプレートに従ってADRを書く
2. **チームレビュー**: アーキテクチャチームが提案を評価
3. **議論期間**: フィードバックと反復の時間を設ける
4. **決定**: 承認、拒否、または変更要求
5. **ステータス更新**: ADRを最終ステータスでマーク

## 関連リソース

- [アーキテクチャ概要](../index.md)
- [システム設計ドキュメント](../system-architecture.md)
- [技術設計](../technical-design.md)
- [Michael NygardのADR記事](https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions)