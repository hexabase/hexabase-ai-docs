# AI オペレーション (AIOps)

Hexabase.AI の主要機能の一つである AIOps は、コンテナサービスの運用を自動化し、チャットインターフェースを通じて直接的な運用制御を提供する、Kubernetes 運用に特化したインテリジェント AI エージェントです。

## 概要

Hexabase.AI の AIOps は包括的な自動化機能を中心に構築されており、K8S 運用に特化した AI エージェントが、Hexabase プラットフォームから様々なログ情報や運用データを取得してユーザーをサポートします。AI エージェントは、ログインしたユーザーとまったく同じ権限範囲内でのみ動作し、安全で適切なアクセス制御を保証します。

この革新的なアプローチにより、自然言語でのやり取りを通じて既存のワークフローとシームレスに統合しながら、インテリジェントな自動化、プロアクティブな監視、そして Kubernetes インフラストラクチャの管理方法を変革します。

## コア AIOps 機能

<div class="grid cards" markdown>

- :material-chat:{ .lg .middle } **チャットインターフェース運用**

  ***

  自然言語チャットインターフェースを通じた直接的な運用制御

  [:octicons-arrow-right-24: チャット運用ガイド](ai-devops-use-cases.md)

- :material-monitor:{ .lg .middle } **インテリジェント監視**

  ***

  プロアクティブアラート付きのリソースとログ監視

  [:octicons-arrow-right-24: 監視機能](../concept/technology-stack.md)

- :material-auto-fix:{ .lg .middle } **自動運用**

  ***

  自己修復システムと自動デプロイメントサポート

  [:octicons-arrow-right-24: 自動化ガイド](ai-devops-use-cases.md)

- :material-robot:{ .lg .middle } **AI エージェント統合**

  ***

  任意のチャットツールとのボットとしてのシームレスな統合

  [:octicons-arrow-right-24: ボット統合](../concept/technology-stack.md)

</div>

## 利用可能な機能

Hexabase.AI AIOps エージェントは以下の包括的な機能を提供します：

### 🌅 日次運用
- **朝の挨拶**: 毎朝の自動的なシステムステータスレポート
- **システムヘルスサマリー**: クラスターステータス、リソース使用率、夜間の問題の概要

### 📊 監視・アラート
- **リソース監視**: CPU、メモリ、ストレージ、ネットワークリソースの継続的な監視
- **ログ監視**: アプリケーションとシステムログのインテリジェントな分析
- **プロアクティブアラート**: ノイズを削減し、実行可能な問題に焦点を当てたスマートアラートシステム
- **パフォーマンスメトリクス**: アプリケーションパフォーマンス指標のリアルタイム追跡

### 🔧 課題管理
- **課題検出**: アラートと監視データからの問題の自動識別
- **課題提起**: 指定された課題管理システムとの直接統合
- **初期調査**: AI を活用した根本原因分析と問題調査
- **修正提案**: 特定された問題を解決するためのインテリジェントな提案
- **PR/MR 作成**: 提案された修正のためのプルリクエストまたはマージリクエストの自動作成

### 💬 チャット統合
- **マルチプラットフォームサポート**: 任意のチャットツール（Slack、Teams、Discord など）にボットとして登録可能
- **自然言語インターフェース**: 平易な日本語を使用してインフラストラクチャとやり取り
- **コンテキストレスポンス**: AI があなたの特定の環境を理解し、関連する情報を提供
- **安全なアクセス**: ログインしたユーザーとまったく同じ権限内で動作

### 🚀 デプロイメント・テスト
- **自動テスト**: 専用テスト環境での継続的なテスト
- **テスト結果監視**: テスト結果と品質メトリクスのリアルタイム追跡
- **新システムデプロイメントサポート**: AI アシスト付きのデプロイメント計画と実行
- **AI 生成デプロイメント**: デプロイメント設定のインテリジェントな作成
- **設定反映**: 最適化された設定と構成の自動適用

### ⚙️ リソース管理
- **リソース追加**: 新しいインフラストラクチャリソースの AI ガイド付き追加
- **リソース変更**: 既存リソースのインテリジェントな更新と最適化
- **リソース削除**: 未使用または廃止されたリソースの安全な削除
- **キャパシティプランニング**: 使用パターンに基づく予測的リソース計画

### 📝 活動ログ
- **動作ログ**: すべての AI エージェント活動の包括的なログ記録
- **監査証跡**: AI エージェントが実行したアクションの完全な履歴
- **意思決定の透明性**: 特定のアクションが推奨または実行された理由の明確な説明
- **コンプライアンスサポート**: 規制およびコンプライアンス要件のための詳細なログ

## チャットインターフェース運用

AIOps チャットインターフェースにより、自然言語コマンドを通じて Kubernetes インフラストラクチャを管理できます：

### チャットでのやり取り例

```
👤 ユーザー: "おはようございます。システムの調子はどうですか？"
🤖 AI エージェント: "おはようございます！システムステータス: すべてのクラスターが正常です。
              CPU使用率: 65%（正常）、メモリ: 72%（正常）。
              過去24時間でアラートはありません。
              午前10:00にuser-service v2.1.0のデプロイメントが予定されています。"

👤 ユーザー: "決済サービスのログを見せてください"
🤖 AI エージェント: "過去1時間のpayment-serviceログを取得中...
              [ログ分析] エラーは見つかりませんでした。1,247件の成功した取引。
              平均応答時間: 145ms（SLA内）。"

👤 ユーザー: "チェックアウトAPIが遅いようですが、調査してもらえますか？"
🤖 AI エージェント: "チェックアウトAPIのパフォーマンスを調査中...
              [分析] データベース接続プールが95%の容量に達しています。
              [推奨] データベース接続を20から30にスケールしてください。
              [アクション] 接続プール設定を更新するPRを作成中。
              PR #154を作成しました: 'チェックアウトAPI用データベース接続プールのスケール'"
```

### サポート対象チャットプラットフォーム

- **Slack**: リッチフォーマット付きのネイティブボット統合
- **Microsoft Teams**: カードインタラクション付きのフル機能ボット
- **Discord**: 絵文字リアクション付きのコミュニティフレンドリーボット
- **Telegram**: インラインキーボード付きの安全なメッセージング
- **カスタムWebhook**: API経由での任意のチャットプラットフォームとの統合

## 日次運用ワークフロー

### 朝のシステムレポート
AI エージェントは毎朝自動的に以下を提供します：

```
🌅 日次システムレポート - 2024年3月15日

📊 クラスターヘルス:
   ✅ 本番環境: 正常 (12/12 ノード)
   ✅ ステージング: 正常 (4/4 ノード)
   ⚠️  開発環境: 1ノードが再起動中

📈 リソースステータス:
   • CPU使用率: 68% (昨日から↗5%)
   • メモリ使用率: 74% (安定)
   • ストレージ: 45% (昨日から↘2%)

🔔 夜間の活動:
   • 3件のデプロイメントが正常に完了
   • 2件の自動スケーリングイベント (user-service, api-gateway)
   • 0件の重要アラート

📋 今日の予定:
   • 10:00 AM: notification-service v1.2.3のデプロイ
   • 2:00 PM: 本番データベースの定期バックアップ
   • 4:00 PM: 週次セキュリティスキャン

💡 推奨事項:
   • 開発クラスターノードのアップグレードを検討
   • ストレージ使用量が増加傾向、保持ポリシーの確認
```

## AIOps の開始

### フェーズ1: AIOps エージェントの有効化

```bash
# ワークスペース用のAIOpsを有効化
hb aiops enable --workspace production

# チャット統合の設定
hb aiops chat-bot setup \
  --platform slack \
  --webhook-url $SLACK_WEBHOOK_URL \
  --channel "#ops-alerts"

# 監視設定の構成
hb aiops monitoring configure \
  --daily-reports true \
  --alert-threshold medium \
  --auto-investigation true
```

### フェーズ2: チャットボット登録

#### Slack 統合
```bash
# SlackでAIOpsボットを登録
hb aiops chat-bot register slack \
  --app-token $SLACK_APP_TOKEN \
  --bot-token $SLACK_BOT_TOKEN \
  --signing-secret $SLACK_SIGNING_SECRET
```

#### Microsoft Teams 統合
```bash
# TeamsでAIOpsボットを登録
hb aiops chat-bot register teams \
  --app-id $TEAMS_APP_ID \
  --app-password $TEAMS_APP_PASSWORD \
  --tenant-id $TEAMS_TENANT_ID
```

### フェーズ3: 自動化の設定

```bash
# 自動課題管理の設定
hb aiops issues configure \
  --system jira \
  --project-key "OPS" \
  --auto-create true \
  --severity-mapping critical:P1,high:P2,medium:P3

# 自動PR作成の有効化
hb aiops automation enable pr-creation \
  --repository github.com/myorg/infrastructure \
  --branch-prefix "aiops/fix-" \
  --auto-assign-reviewers ops-team

# デプロイメントサポートの設定
hb aiops deployment configure \
  --auto-generate-configs true \
  --test-environment staging \
  --approval-required false
```

## セキュリティと権限

### アクセス制御
AIOps エージェントは厳格なセキュリティガイドラインの下で動作します：

- **ユーザースコープ権限**: エージェントのアクションはログインしたユーザーと同じ権限に制限
- **監査ログ**: すべてのエージェント活動が完全なトレーサビリティでログ記録
- **安全な通信**: すべてのチャット統合で暗号化チャネルを使用
- **ロールベースアクセス**: ユーザーロールに基づく異なる機能の利用可能性

### 権限レベル

| ユーザーロール | 利用可能な機能 |
|-------------|---------------|
| **閲覧者** | リソース監視、ログ表示、ステータスレポート |
| **開発者** | + デプロイメントサポート、テスト、PR作成 |
| **運用者** | + リソース管理、課題提起、自動化 |
| **管理者** | + すべての機能、エージェント設定、セキュリティ設定 |

## 運用範囲

AIOps エージェントは Kubernetes 運用専用に設計されており、以下の対応を行います：

✅ **範囲内のリクエストに応答:**
- システム監視とステータスクエリ
- ログ分析とトラブルシューティング
- リソース管理運用
- デプロイメントとテストサポート
- 課題調査と解決
- パフォーマンス最適化の推奨

❌ **範囲外のリクエストには応答しません:**
- 運用に関連しない一般的なAIアシスタンス
- コード開発やプログラミングヘルプ
- ビジネスや戦略的アドバイス
- 個人的または非技術的な質問
- ユーザーの権限範囲外の運用

## 次のステップ

### クイックセットアップチェックリスト

1. **✅ AIOps有効化**: ワークスペース用のAIエージェントを有効化
2. **✅ チャットボット設定**: 希望するチャットプラットフォームとの統合を設定
3. **✅ 権限設定**: ユーザーロールとアクセスレベルを設定
4. **✅ 統合テスト**: エージェントが基本コマンドに応答することを確認
5. **✅ 自動化設定**: 自動ワークフローと課題管理を設定

### ベストプラクティス

- **小さく始める**: 自動化を有効にする前に監視とアラートから開始
- **明確な境界設定**: エージェントの運用範囲を適切に設定
- **エージェント活動の監視**: 動作ログと決定の定期的な確認
- **ユーザートレーニング**: チームメンバーがAIエージェントとのやり取り方法を理解することを確認
- **段階的自動化**: 信頼の構築に伴って、より多くの自動化機能を段階的に有効化

### ヘルプの取得

```
# AIOpsコマンドのヘルプを取得
hb aiops help

# エージェントステータスの確認
hb aiops status

# 最近のエージェント活動を表示
hb aiops logs --recent

# チャット統合のテスト
hb aiops chat-bot test
```

## 関連ドキュメント

- [コアコンセプト](../concept/index.md)
- [技術スタック](../concept/technology-stack.md)
- [RBAC設定](../rbac/index.md)
- [アプリケーション管理](../applications/index.md)