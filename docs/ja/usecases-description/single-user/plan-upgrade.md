# プランをアップグレードする

## 1. ユースケース名
プランをアップグレードする

## 2. アクター（実行者）
- **主アクター：** 個人開発者
- **副アクター：** Hexabase.AIシステム、決済システム、Kubernetesクラスター

## 3. 事前条件
- 開発者がHobbyプランを利用している
- アプリケーションが本番環境への移行準備ができている
- 開発者が支払い情報（クレジットカードなど）を持っている
- 既存のワークロードが共有ノードプールで実行されている

## 4. 成功シナリオ（基本フロー）
1. 開発者がダッシュボードの「プラン」セクションにアクセスする
2. システムが現在のHobbyプランの利用状況と制限を表示する
3. 開発者が「Proにアップグレード」ボタンをクリックする
4. システムがProプランの機能比較と価格情報を表示する
5. 開発者が「アップグレード開始」ボタンをクリックする
6. システムが支払い情報入力画面を表示する
7. 開発者がクレジットカード情報を入力する
8. システムが支払い情報を検証する
9. 開発者が利用規約を確認し、同意チェックボックスをクリックする
10. 開発者が「アップグレード実行」ボタンをクリックする
11. システムが決済処理を実行する
12. システムがプランアップグレードを開始する
13. システムが専用ノードのプロビジョニングを開始する
14. システムがアップグレード進行状況を表示する
15. システムがアップグレード完了通知を表示する
16. 開発者が拡張機能（無制限Functions、高度なAIOps）を確認する

## 5. 代替シナリオ（代替フロー）
**5a. 決済失敗**
- 11a. クレジットカード決済が失敗する
- 11b. システムが決済エラーメッセージを表示する
- 11c. 開発者が支払い情報を確認・修正する
- 11d. 開発者が再度決済処理を実行する

**5b. 専用ノードプロビジョニング失敗**
- 13a. 専用ノードの作成中にリソース不足エラーが発生する
- 13b. システムがエラー状況をダッシュボードに表示する
- 13c. システムが自動的に再試行を実行する
- 13d. 再試行が失敗した場合、サポートチームが手動で対応する

**5c. アップグレード中断**
- 12a. アップグレード処理中にネットワーク接続が失われる
- 12b. システムがアップグレードを一時停止する
- 12c. 接続復旧後、システムが処理を自動的に再開する
- 12d. 開発者が進行状況を再確認する

**5d. 既存ワークロード影響**
- 12a. アップグレード中に既存アプリケーションが一時的にアクセス不能になる
- 12b. システムが影響を最小限に抑える段階的移行を実行する
- 12c. システムが移行完了後にアプリケーションアクセスを復旧する

## 6. 事後条件
- アカウントがProプランに変更されている
- 専用ノードがプロビジョニングされ、利用可能になっている
- 既存のワークロードが中断なく実行を継続している
- 無制限のFunctions、CronJobsが利用可能になっている
- 高度なAIOps機能（異常検出、予測スケーリング）が有効になっている
- 100GBの高性能SSDストレージが利用可能になっている
- 自動バックアップが設定されている
- 99.9%アップタイム保証が適用されている
- 優先メールサポートが利用可能になっている 