# 組織とチームを設定する

## 1. ユースケース名
組織とチームを設定する

## 2. アクター（実行者）
- **主アクター：** 組織管理者
- **副アクター：** Hexabase.AIシステム、チームメンバー、メール配信システム

## 3. 事前条件
- 組織管理者がチームプランにサインアップ済みである
- 招待するチームメンバーのメールアドレスリストが準備されている
- 組織の基本情報（会社名、業界など）が決定されている

## 4. 成功シナリオ（基本フロー）
1. 組織管理者がHexabase.AIプラットフォームにログインする
2. システムが組織作成ウィザードを表示する
3. 組織管理者が組織名（例：`MyStartupInc`）を入力する
4. 組織管理者が組織の業界と規模を選択する
5. システムが組織を作成し、管理者に組織管理者権限を付与する
6. システムがチームメンバー招待画面を表示する
7. 組織管理者がDevOpsエンジニアのメールアドレスを入力する
8. 組織管理者がDevOpsエンジニアに「組織管理者」ロールを設定する
9. 組織管理者が他のチームメンバーのメールアドレスを入力する
10. 組織管理者が他のメンバーに「組織ユーザー」ロールを設定する
11. 組織管理者が「招待送信」ボタンをクリックする
12. システムが各メンバーに招待メールを送信する
13. チームメンバーが招待メールを受信し、招待リンクをクリックする
14. チームメンバーがアカウント作成またはログインを完了する
15. システムがチームメンバーを組織に追加し、適切なロールを付与する
16. システムが組織ダッシュボードを表示し、メンバー一覧を確認する

## 5. 代替シナリオ（代替フロー）
**5a. 招待メール送信失敗**
- 12a. メール配信システムの問題で招待メールが送信されない
- 12b. システムが送信失敗のメッセージを表示する
- 12c. 組織管理者が手動で招待リンクをコピーしてメンバーに共有する
- 12d. または、後で招待を再送信する

**5b. 重複した組織名**
- 5a. 入力した組織名が既に使用されている
- 5b. システムがエラーメッセージと代替案を表示する
- 5c. 組織管理者が別の組織名を入力する

**5c. 招待受諾期限切れ**
- 14a. チームメンバーが招待リンクの有効期限内にアクセスしない
- 14b. 招待リンクが無効になる
- 14c. 組織管理者が再度招待を送信する

**5d. 権限設定エラー**
- 8a. ロール設定で誤った権限を付与する
- 8b. 組織管理者が組織設定画面でロールを修正する
- 8c. システムが変更された権限を適用する

## 6. 事後条件
- 組織が作成され、組織管理者が設定されている
- DevOpsエンジニアが組織管理者権限を持っている
- 他のチームメンバーが組織ユーザー権限を持っている
- RBAC（ロールベースアクセス制御）が有効になっている
- 組織メンバー全員が組織ダッシュボードにアクセス可能になっている
- 請求管理とリソース管理の権限が適切に分離されている 